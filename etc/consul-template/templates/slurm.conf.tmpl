#
# Example slurm.conf file. Please run configurator.html
# (in doc/html) to build a configuration file customized
# for your environment.
#
#
# slurm.conf file generated by configurator.html.
#
# See the slurm.conf man page for more information.
#
#ClusterName={{key "slurm/clustername"}}
ClusterName=QNIBTerminal
{{range service "slurmctld" "any"}}
ControlMachine={{.Name}}
ControlAddr={{.Address}}{{end}}
DebugFlags=NO_CONF_HASH
#BackupController=
#BackupAddr=

SlurmUser=slurm
SlurmctldPort=6817
SlurmdPort=6818
AuthType=auth/munge
StateSaveLocation=/tmp
SwitchType=switch/none
MpiDefault=none

SlurmctldPidFile=/var/run/slurmctld.pid
SlurmdPidFile=/var/run/slurmd.pid

ProctrackType=proctrack/pgid
CacheGroups=0
ReturnToService=0

PrologSlurmctld=/opt/qnib/slurm/bin/prolog.sh
EpilogSlurmctld=/opt/qnib/slurm/bin/epilog.sh

# TIMERS
SlurmctldTimeout=300
SlurmdTimeout=300
InactiveLimit=0
MinJobAge=30
KillWait=30
Waittime=0

SchedulerType=sched/backfill
SelectType=select/linear
FastSchedule=0

# COMPUTE NODES

{{range service "slurmd" "any"}}
NodeName={{.Node}} NodeAddr={{.Address}}{{end}}

# Create list
PartitionName=odd Nodes={{range $i, $e := service "slurmd" "any"}}{{if $e.Node| regexMatch ".*(1|3|5|7|9|a|c|e)$"}}{{if ne $i 0}},{{end}}{{$e.Node}}{{end}}{{end}} Default=NO MaxTime=INFINITE State=UP
PartitionName=even Nodes={{range $i, $e := service "slurmd" "any"}}{{if $e.Node| regexMatch ".*(2|4|6|8|0|b|d|f)$"}}{{if ne $i 0}},{{end}}{{$e.Node}}{{end}}{{end}} Default=NO MaxTime=INFINITE State=UP
